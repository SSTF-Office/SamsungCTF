#!/usr/bin/python3

import wave, struct

e = wave.open("unreal.wav", "r")
data = []

for i in range(e.getnframes()):
    d = e.readframes(1)
    f = struct.unpack("<hh", d)
    f = f[0] - f[1]

    if data or f!=0:
        data.append(f)

magic = 8266

data = [a for a in map(abs, data)]

x = [sum(data[i:i+magic])/magic for i in range(0,len(data),magic)]
trh = int(max(x) / 2)
# ~ print(trh)

x = ["1" if i>trh else "0" for i in x]
# ~ print(x[:8])

u = ["".join(x[i:i+8]) for i in range(0,len(x),8)]
# ~ print(u[:8])

u = [chr(int(i[::-1],2)) for i in u]
# ~ print(u[:8])

print("".join(u))

